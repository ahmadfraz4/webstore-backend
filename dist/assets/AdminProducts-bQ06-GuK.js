import{dl as f,dj as p,r as x,dm as i,dn as h,dG as c,j as t,dq as g,dH as N,dI as j,dJ as S,dt as k,de as b,df as C,dK as E}from"./index-DEEwLNQ6.js";function v(){let s=f(),{adminProducts:a,loading:r,error:d}=p(e=>e.products);x.useEffect(()=>{d&&(i.error(d.toString(),{autoClose:1200}),s({type:h})),s(c())},[s,d]);const n=[{field:"id",headerName:"Product_id",minWidth:250,flex:1},{field:"name",headerName:"Name",minWidth:250,flex:.3},{field:"stock",headerName:"Stock",editable:!0,minWidth:100,flex:.3},{field:"price",headerName:"Price",type:"number",minWidth:140,flex:.3,editable:!0},{field:"action",headerName:"Action",minWidth:140,sortable:!1,flex:.3,editable:!0,renderCell:e=>t.jsxs("div",{className:"d-flex",children:[t.jsx(j,{className:"me-4",to:`/edit/product/${e.id}`,children:t.jsx(S,{className:"product-edit-option m-0 fs-5"})}),t.jsx("div",{className:"ms-1",onClick:()=>m(e.id),children:t.jsx(k,{className:"product-delete-option fs-5"})})]}),cellClassName:"d-flex justify-content-center"}],o=[];a&&a.forEach(e=>{o.push({id:e._id,name:e.name,stock:e.stock,price:e.price})});async function m(e){if(window.confirm("sure")){let u=i.loading("deleting product..");try{await b.delete(`${C}/products/delete/${e}`),i.dismiss(u),i.success("Deleted Successfully"),s(E(e)),s(c())}catch(l){i.dismiss(r),i.error(l.toString()),console.log(l)}}}return r?t.jsx(g,{}):t.jsx("div",{className:"px-3",children:t.jsx(N,{rows:o,columns:n,initialState:{pagination:{paginationModel:{pageSize:5}}},pageSizeOptions:[5],checkboxSelection:!0,disableRowSelectionOnClick:!0})})}export{v as default};
