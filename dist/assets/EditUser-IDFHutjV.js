import{dl as U,dd as f,r as d,dA as b,dm as n,dB as C,dx as D,j as a,dC as S,dD as w}from"./index-V0zFXsgX.js";function E(){let s=U(),{user:l}=f(e=>e.User),{isUpdated:o,error:m}=f(e=>e.profile),[x,h]=d.useState(l.avatar.url),[c,v]=d.useState(""),[r,g]=d.useState({name:l&&l.name,email:l&&l.email});function p(e){g({...r,[e.target.name]:e.target.value})}let i;async function j(e){e.preventDefault();let t=new FormData;t.append("name",r.name),t.append("email",r.email),c!==""&&t.append("avatar",c),i=n.loading("loading plz wait..."),s(w(t))}d.useEffect(()=>{o?(s(b()),n.dismiss(i),n.success("profile updated successfully",{autoClose:1500}),s({type:C})):(n.dismiss(i),m&&n.error("profile cant updated"),s(D()))},[s,o,i,m]);const y=e=>{const t=e.target.files[0];if(t&&t.type.match("image.*")){const u=new FileReader;u.onload=N=>{h(N.target.result)},u.readAsDataURL(t)}v(e.target.files[0])};return a.jsx("section",{className:"d-flex flex-column align-items-center w-100 pb-5 ",children:a.jsx("div",{style:{top:"20px"},className:"login-card position-relative col-lg-4 col-md-5 pt-5 col-sm-7 col-10 card mb-5",children:a.jsxs("form",{onSubmit:j,encType:"multipart/form-data",className:"login-form px-2 pb-5",children:[a.jsxs("div",{className:"my-2 d-flex justify-content-center",children:[a.jsx("input",{type:"file",className:"d-none",name:"avatar",id:"avatar",onChange:y}),a.jsxs("label",{htmlFor:"avatar",className:"label-avatar",children:[a.jsx(S,{className:"icon"}),a.jsx("img",{src:x,className:"signup-avatar",alt:"avatar"})]})]}),a.jsx("input",{required:!0,type:"text",name:"name",placeholder:"name",onChange:e=>p(e),value:r.name,className:"form-control"}),a.jsx("input",{required:!0,type:"email",name:"email",placeholder:"email",onChange:e=>p(e),value:r.email,className:"form-control mt-2"}),a.jsx("div",{className:"d-flex align-items-center flex-column",children:a.jsx("button",{className:"button-19 py-2 w-75 my-3",children:"Update"})})]})})})}export{E as default};
